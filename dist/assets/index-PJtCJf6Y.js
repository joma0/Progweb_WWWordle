var T=Object.defineProperty;var g=i=>{throw TypeError(i)};var N=(i,e,t)=>e in i?T(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var h=(i,e,t)=>N(i,typeof e!="symbol"?e+"":e,t),A=(i,e,t)=>e.has(i)||g("Cannot "+t);var p=(i,e,t)=>e.has(i)?g("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t);var c=(i,e,t)=>(A(i,e,"access private method"),t);var y=(i,e,t)=>new Promise((r,s)=>{var n=l=>{try{u(t.next(l))}catch(d){s(d)}},a=l=>{try{u(t.throw(l))}catch(d){s(d)}},u=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,a);u((t=t.apply(i,e)).next())});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();var o,b,w,v,f,L,S,x;class E{constructor(e){p(this,o);this.form=c(this,o,b).call(this),this.game=e}switchState(){this.form.inert===!0?(this.form.removeAttribute("inert"),this.form.firstChild.focus()):this.form.inert=!0}getWord(e){const t=new FormData(e);let r="";for(let s of t.values())r+=s;c(this,o,f).call(this,r)&&r.length===this.game.tryNumber?(console.log("Il faut envoyer la requÃªte"),c(this,o,L).call(this,r)):c(this,o,f).call(this,r)?r.length<this.game.tryNumber&&this.game.displayMessage("Le mot doit contenir 5 lettres"):this.game.displayMessage("Ceci n'est pas un mot")}}o=new WeakSet,b=function(){const e=document.createElement("form");for(let r=0;r<=4;r++){const s=document.createElement("input");s.classList.add("letter"),s.type="text",s.name=`letter-${r}`,s.maxLength="1",e.appendChild(s),c(this,o,w).call(this,s)}const t=document.createElement("input");return t.type="submit",t.hidden=!0,e.appendChild(t),t.addEventListener("click",r=>{r.preventDefault(),console.dir(r.target.form),this.getWord(r.target.form)}),e.inert=!0,e},w=function(e){e.addEventListener("keyup",t=>{c(this,o,v).call(this,t.key)||t.key==="ArrowRight"?t.target.nextSibling.focus():t.key==="ArrowLeft"&&t.target.previousSibling!=null&&t.target.previousSibling.focus()})},v=function(e){return/^([\x30-\x39]|[\x61-\x7a])$/i.test(e)},f=function(e){return/^[a-zA-Z]+$/.test(e)},L=function(e){return y(this,null,function*(){const t="https://progweb-wwwordle-api.onrender.com/guess",s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guess:e})},n=yield fetch(t,s),a=yield n.json();console.log(n),console.log(a),a.status==="invalid"?this.game.displayMessage(a.message):a.status==="valid"&&(this.game.displayMessage(a.message),c(this,o,S).call(this,a.feedback)||c(this,o,x).call(this))})},S=function(e){let t=0,r=!0;for(let s of e){switch(console.log(s),s.status){case"correct":this.form.children[t].classList.add("correct");break;case"present":this.form.children[t].classList.add("present"),r=!1;break;case"absent":this.form.children[t].classList.add("absent"),r=!1;break}t++}return r},x=function(){this.game.currentTry<this.game.tryNumber?this.game.nextTry():this.game.displayMessage("Game over")};class M{constructor(e){h(this,"answers",[]);h(this,"currentTry",0);this.tryNumber=e}createBoard(){for(let e=1;e<=this.tryNumber;e++)this.answers.push(new E(this));this.currentTry=1,this.answers[this.currentTry-1].switchState()}nextTry(){this.answers[this.currentTry-1].switchState(),this.currentTry+=1,this.answers[this.currentTry-1].switchState()}displayMessage(e){document.querySelector(".message").textContent=e}}const m=new M(5);m.createBoard();const O=document.querySelector(".board");m.answers.forEach(i=>{O.appendChild(i.form)});m.displayMessage("Bonjour");
